{"ast":null,"code":"import React,{useContext}from'react';import{useHistory}from'react-router-dom';import Input from'../../shared/components/FormElements/Input';import Button from'../../shared/components/FormElements/Button';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{VALIDATOR_REQUIRE,VALIDATOR_MINLENGTH}from'../../shared/util/validators';import{useForm}from'../../shared/hooks/form-hook';import{useHttpClient}from'../../shared/hooks/http-hook';import{AuthContext}from'../../shared/context/auth-context';import'./PlaceForm.css';const NewPlace=()=>{const auth=useContext(AuthContext);const{isLoading,error,sendRequest,clearError}=useHttpClient();const[formState,inputHandler]=useForm({title:{value:'',isValid:false},description:{value:'',isValid:false},address:{value:'',isValid:false}},false);const history=useHistory();const placeSubmitHandler=async event=>{event.preventDefault();try{await sendRequest('http://localhost:5000/api/places','POST',JSON.stringify({title:formState.inputs.title.value,description:formState.inputs.description.value,address:formState.inputs.address.value,creator:auth.userId}),{'Content-Type':'application/json'});history.push('/');}catch(err){}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/React.createElement(\"form\",{className:\"place-form\",onSubmit:placeSubmitHandler},isLoading&&/*#__PURE__*/React.createElement(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/React.createElement(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/React.createElement(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/React.createElement(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",disabled:!formState.isValid},\"ADD PLACE\")));};export default NewPlace;","map":{"version":3,"names":["React","useContext","useHistory","Input","Button","ErrorModal","LoadingSpinner","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","useHttpClient","AuthContext","NewPlace","auth","isLoading","error","sendRequest","clearError","formState","inputHandler","title","value","isValid","description","address","history","placeSubmitHandler","event","preventDefault","JSON","stringify","inputs","creator","userId","push","err","createElement","Fragment","onClear","className","onSubmit","asOverlay","id","element","type","label","validators","errorText","onInput","disabled"],"sources":["C:/Users/HP/Desktop/React/mern-project/frontend/src/places/pages/NewPlace.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport './PlaceForm.css';\n\nconst NewPlace = () => {\n  const auth = useContext(AuthContext);\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [formState, inputHandler] = useForm(\n    {\n      title: {\n        value: '',\n        isValid: false\n      },\n      description: {\n        value: '',\n        isValid: false\n      },\n      address: {\n        value: '',\n        isValid: false\n      }\n    },\n    false\n  );\n\n  const history = useHistory();\n\n  const placeSubmitHandler = async event => {\n    event.preventDefault();\n    try {\n      await sendRequest(\n        'http://localhost:5000/api/places',\n        'POST',\n        JSON.stringify({\n          title: formState.inputs.title.value,\n          description: formState.inputs.description.value,\n          address: formState.inputs.address.value,\n          creator: auth.userId\n        }),\n        { 'Content-Type': 'application/json' }\n      );\n      history.push('/');\n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <form className=\"place-form\" onSubmit={placeSubmitHandler}>\n        {isLoading && <LoadingSpinner asOverlay />}\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (at least 5 characters).\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"address\"\n          element=\"input\"\n          label=\"Address\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid address.\"\n          onInput={inputHandler}\n        />\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          ADD PLACE\n        </Button>\n      </form>\n    </React.Fragment>\n  );\n};\n\nexport default NewPlace;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,UAAU,KAAQ,kBAAkB,CAE7C,MAAO,CAAAC,KAAK,KAAM,4CAA4C,CAC9D,MAAO,CAAAC,MAAM,KAAM,6CAA6C,CAChE,MAAO,CAAAC,UAAU,KAAM,+CAA+C,CACtE,MAAO,CAAAC,cAAc,KAAM,mDAAmD,CAC9E,OACEC,iBAAiB,CACjBC,mBAAmB,KACd,8BAA8B,CACrC,OAASC,OAAO,KAAQ,8BAA8B,CACtD,OAASC,aAAa,KAAQ,8BAA8B,CAC5D,OAASC,WAAW,KAAQ,mCAAmC,CAC/D,MAAO,iBAAiB,CAExB,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,IAAI,CAAGZ,UAAU,CAACU,WAAW,CAAC,CACpC,KAAM,CAAEG,SAAS,CAAEC,KAAK,CAAEC,WAAW,CAAEC,UAAW,CAAC,CAAGP,aAAa,CAAC,CAAC,CACrE,KAAM,CAACQ,SAAS,CAAEC,YAAY,CAAC,CAAGV,OAAO,CACvC,CACEW,KAAK,CAAE,CACLC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,KACX,CAAC,CACDC,WAAW,CAAE,CACXF,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,KACX,CAAC,CACDE,OAAO,CAAE,CACPH,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,KACX,CACF,CAAC,CACD,KACF,CAAC,CAED,KAAM,CAAAG,OAAO,CAAGvB,UAAU,CAAC,CAAC,CAE5B,KAAM,CAAAwB,kBAAkB,CAAG,KAAM,CAAAC,KAAK,EAAI,CACxCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAI,CACF,KAAM,CAAAZ,WAAW,CACf,kCAAkC,CAClC,MAAM,CACNa,IAAI,CAACC,SAAS,CAAC,CACbV,KAAK,CAAEF,SAAS,CAACa,MAAM,CAACX,KAAK,CAACC,KAAK,CACnCE,WAAW,CAAEL,SAAS,CAACa,MAAM,CAACR,WAAW,CAACF,KAAK,CAC/CG,OAAO,CAAEN,SAAS,CAACa,MAAM,CAACP,OAAO,CAACH,KAAK,CACvCW,OAAO,CAAEnB,IAAI,CAACoB,MAChB,CAAC,CAAC,CACF,CAAE,cAAc,CAAE,kBAAmB,CACvC,CAAC,CACDR,OAAO,CAACS,IAAI,CAAC,GAAG,CAAC,CACnB,CAAE,MAAOC,GAAG,CAAE,CAAC,CACjB,CAAC,CAED,mBACEnC,KAAA,CAAAoC,aAAA,CAACpC,KAAK,CAACqC,QAAQ,mBACbrC,KAAA,CAAAoC,aAAA,CAAC/B,UAAU,EAACU,KAAK,CAAEA,KAAM,CAACuB,OAAO,CAAErB,UAAW,CAAE,CAAC,cACjDjB,KAAA,CAAAoC,aAAA,SAAMG,SAAS,CAAC,YAAY,CAACC,QAAQ,CAAEd,kBAAmB,EACvDZ,SAAS,eAAId,KAAA,CAAAoC,aAAA,CAAC9B,cAAc,EAACmC,SAAS,MAAE,CAAC,cAC1CzC,KAAA,CAAAoC,aAAA,CAACjC,KAAK,EACJuC,EAAE,CAAC,OAAO,CACVC,OAAO,CAAC,OAAO,CACfC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAC,OAAO,CACbC,UAAU,CAAE,CAACvC,iBAAiB,CAAC,CAAC,CAAE,CAClCwC,SAAS,CAAC,6BAA6B,CACvCC,OAAO,CAAE7B,YAAa,CACvB,CAAC,cACFnB,KAAA,CAAAoC,aAAA,CAACjC,KAAK,EACJuC,EAAE,CAAC,aAAa,CAChBC,OAAO,CAAC,UAAU,CAClBE,KAAK,CAAC,aAAa,CACnBC,UAAU,CAAE,CAACtC,mBAAmB,CAAC,CAAC,CAAC,CAAE,CACrCuC,SAAS,CAAC,2DAA2D,CACrEC,OAAO,CAAE7B,YAAa,CACvB,CAAC,cACFnB,KAAA,CAAAoC,aAAA,CAACjC,KAAK,EACJuC,EAAE,CAAC,SAAS,CACZC,OAAO,CAAC,OAAO,CACfE,KAAK,CAAC,SAAS,CACfC,UAAU,CAAE,CAACvC,iBAAiB,CAAC,CAAC,CAAE,CAClCwC,SAAS,CAAC,+BAA+B,CACzCC,OAAO,CAAE7B,YAAa,CACvB,CAAC,cACFnB,KAAA,CAAAoC,aAAA,CAAChC,MAAM,EAACwC,IAAI,CAAC,QAAQ,CAACK,QAAQ,CAAE,CAAC/B,SAAS,CAACI,OAAQ,EAAC,WAE5C,CACJ,CACQ,CAAC,CAErB,CAAC,CAED,cAAe,CAAAV,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}